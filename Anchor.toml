[toolchain]
package_manager = "yarn"

[features]
resolution = true
skip-lint = false

# CHANGE: Declare program IDs for both local validator runs and devnet deploys.
# WHY: It is simpler to reuse the same id across clusters so Anchor knows where to deploy.
# QUOTE(TZ): "Can you fix it? ... Anchor still reaches out to the local validator"
# REF: USER-DEPLOY
# SOURCE: n/a
# CHANGE: Translate configuration comments to English per localization requirement.
# WHY: Build tooling settings must be readable by every contributor without mixed languages.
# QUOTE(TZ): "Replace all Russian with English"
# REF: USER-TRANSLATE
# SOURCE: n/a
[programs.localnet]
property_shares = "Bvq9mwXmV95Mz848zK8FZ11JiKfLjGc7savK5u657H9Z"

[programs.devnet]
property_shares = "Bvq9mwXmV95Mz848zK8FZ11JiKfLjGc7savK5u657H9Z"

[registry]
url = "https://api.apr.dev"

[provider]
# CHANGE: Hardcode the devnet URL so Anchor will not fall back to localnet even with incorrect env vars.
# WHY: The user deployed with environment variables but the CLI ignored them and connected to local RPC.
# QUOTE(TZ): "Anchor deploy still sends to http://127.0.0.1"
# REF: USER-DEPLOY
# SOURCE: https://www.anchor-lang.com/docs/anchor-toml#provider
cluster = "https://api.devnet.solana.com"
wallet = "~/.config/solana/id.json"

# CHANGE: Register ts-node for Anchor tests so .ts suites transpile before execution.
# WHY: Node raised \"Cannot use import statement outside a module\" without ts-node hooks.
# QUOTE(TZ): "Write Anchor tests that verify..." (section 6).
# REF: REQ-INIT
# SOURCE: n/a
[scripts]
test = "NODE_OPTIONS='--loader ts-node/esm' yarn run ts-mocha -p ./tsconfig.json -t 1000000 \"tests/**/*.ts\""
